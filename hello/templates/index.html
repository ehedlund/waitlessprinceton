<html>
	<!-- NAVBAR -->
	<head>
<title>waitLess </title>
  <link rel="stylesheet" type="text/css" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css" />
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
  <script type="text/javascript" src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
  <style type="text/css">
    .jumbotron {
        background: #532f8c;
        color: white;
        padding-bottom: 80px
    }
    .jumbotron .btn-primary {
        background: #845ac7;
        border-color: #845ac7
    }
    .jumbotron .btn-primary:hover {
        background: #7646c1
    }
    .jumbotron p {
        color: #d9ccee;
        max-width: 75%;
        margin: 1em auto 2em
    }
    .navbar+.jumbotron {
        margin-top: -20px
    }
    .jumbotron .lang-logo {
        display: block;
        background: #b01302;
        border-radius: 50%;
        overflow: hidden;
        width: 100px;
        height: 100px;
        margin: auto;
        border: 2px solid white
    }
    .jumbotron .lang-logo img {
        max-width: 100%
    }
  </style>
</head>
<body>
<nav class="navbar navbar-default navbar-static-top navbar-inverse">
  <div class="container">
    <ul class="nav navbar-nav">
      <li class="active">
        <a href="/"><span class="glyphicon glyphicon-home"></span> waitLess </a>
      </li>
      <li>
        <a href="https://waitlessprinceton.herokuapp.com/meet"><span class="glyphicon glyphicon-user"></span> Meet the Team </a>
      </li>
      <li>
        <a href="https://waitlessprinceton.herokuapp.com/about"><span class="glyphicon glyphicon-info-sign"></span> About </a>
      </li>
      <li>
        <a href="https://waitlessprinceton.herokuapp.com/status"><span class="glyphicon glyphicon-bookmark"></span> Status Site </a>
      </li>
    </ul>   
  </div>
</nav>

{% block content %}{% endblock %}

</body>
	
	
	<head>
		<!-- leaflet includes -->
		<link rel="stylesheet" href="https://unpkg.com/leaflet@1.0.3/dist/leaflet.css" />
		<script src="https://unpkg.com/leaflet@1.0.3/dist/leaflet.js"></script>

		<!-- chart generation script -->
	    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
	    <script type="text/javascript">
	      google.charts.load('current', {'packages':['corechart']});
	      google.charts.setOnLoadCallback(drawChart);
	    </script>

		<!-- hover box and legend -->
		<style media="screen" type="text/css">
		.info {
			padding:6px 8px;
			font: 14px/16px Arial, Helvetica, sans-serif;
			background: white;
			background: rgba(255,255,255,0.8);
			box-shadow: 0 0 15px rgba(0,0,0,0.2);
			border-radius: 5px;
		}
		.info h4 {
			margin: 0 0 5px;
			color: #777;
		}
		.legend {
			line-height: 18px;
			color: #555;
		}
		.legend i {
			width: 18px;
			height: 18px;
			float: left;
			margin-right: 8px;
			opacity: 0.7;
		}
		</style>
	</head>
	
	<!-- map -->
	<body>
		<div id="mapid"></div>
		<!-- map positioning -->
		<style>
			#mapid {
				position: absolute;
				top: 50; right: 0; bottom: 0; left: 0;
			}
			
		</style>

		<script>
			// popup variables
			var popupId = 1;
 			var chartId = "curve_chart" + popupId;
			
			// load map
			var mymap = L.map('mapid').setView([40.346196, -74.656426], 16.4);     
			L.tileLayer('https://api.mapbox.com/styles/v1/waitlessprinceton/cj19oscmj00582tqnyb4sabtq/tiles/256/{z}/{x}/{y}?access_token=pk.eyJ1Ijoid2FpdGxlc3NwcmluY2V0b24iLCJhIjoiY2oweTF2ZG5rMDFqZjMzbzJnbWJ1MGxmcCJ9.M-_AnWBdd7urxxR2Ks-iUA', {
					attribution: 'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery Â© <a href="http://mapbox.com">Mapbox</a>',
					maxZoom: 18,
					minZoom: 16,
				}).addTo(mymap);
			// generate random densities - can replace variable values with real data
			var d1 = Math.round(Math.random() * 1000);
			var d2 = Math.round(Math.random() * 1000);
			var d3 = Math.round(Math.random() * 1000);
			var d4 = Math.round(Math.random() * 1000);
			var d5 = Math.round(Math.random() * 1000);
			var d6 = Math.round(Math.random() * 1000);
			var d7 = Math.round(Math.random() * 1000);
			var d8 = Math.round(Math.random() * 1000);
			var d9 = Math.round(Math.random() * 1000);
			var d10 = Math.round(Math.random() * 1000);
			var d11 = Math.round(Math.random() * 1000);
			var d12 = Math.round(Math.random() * 1000);
			var d13 = Math.round(Math.random() * 1000);
			var d14 = Math.round(Math.random() * 1000);
			var d15 = Math.round(Math.random() * 1000);
			// load building data
			var buildingData = {"type":"FeatureCollection","generator":"overpass-turbo","copyright":"The data included in this document is from www.openstreetmap.org. The data is made available under ODbL.","timestamp":"2017-04-08T16:21:02Z","features":[{"type":"Feature","id":"way/141230075","properties":{"@id":"way/141230075","building":"university","name":"Chancellor Green Library","density":d1,"lat":40.349052,"long":-74.658600,"max":1000},"geometry":{"type":"Polygon","coordinates":[[[-74.6584514,40.3490694],[-74.6584572,40.3490803],[-74.6583997,40.3490979],[-74.6583864,40.3490728],[-74.658353,40.349061],[-74.6583169,40.3490712],[-74.6582984,40.3490979],[-74.6583378,40.3491824],[-74.6583717,40.349197],[-74.6584143,40.3491859],[-74.6584259,40.3491591],[-74.6584177,40.3491384],[-74.6584771,40.3491247],[-74.658484,40.349142],[-74.6585745,40.3491782],[-74.6586773,40.3491535],[-74.6587308,40.3490774],[-74.6587859,40.3490635],[-74.6588184,40.3490815],[-74.6588666,40.3490695],[-74.6588723,40.3490401],[-74.6588393,40.3489624],[-74.6588031,40.3489438],[-74.6587638,40.3489551],[-74.6587488,40.3489821],[-74.6587551,40.3489961],[-74.658689,40.3490133],[-74.6586844,40.349003],[-74.6586,40.3489711],[-74.658509,40.3489932],[-74.6584514,40.3490694]]]}},{"type":"Feature","id":"way/27341305","properties":{"@id":"way/27341305","addr:housenumber":"1","addr:street":"Washington Road","amenity":"library","building":"yes","name":"Firestone Library","operator":"Princeton University","wheelchair":"yes","density":d2,"lat":40.349450,"long":-74.657430,"max":1000},"geometry":{"type":"Polygon","coordinates":[[[-74.6581293,40.3494695],[-74.6580243,40.3492453],[-74.6580587,40.349236],[-74.6580406,40.3491975],[-74.6580095,40.349206],[-74.6579775,40.3491384],[-74.657672,40.3492223],[-74.6576366,40.3491476],[-74.6575817,40.3491626],[-74.6575672,40.3491319],[-74.6574172,40.3491732],[-74.657411,40.3491602],[-74.6573801,40.3491687],[-74.6573344,40.3490728],[-74.657008,40.3491632],[-74.657072,40.3492974],[-74.6569902,40.3493201],[-74.6569941,40.3493023],[-74.6569467,40.3492594],[-74.656874,40.3492638],[-74.6568422,40.3493201],[-74.6568869,40.3493657],[-74.6569063,40.3493662],[-74.6569233,40.3494033],[-74.6567993,40.3494364],[-74.6568623,40.3495735],[-74.6568398,40.3495795],[-74.6568748,40.3496555],[-74.6568526,40.3496851],[-74.656866,40.349715],[-74.6569003,40.3497262],[-74.6569229,40.3497198],[-74.656987,40.3498521],[-74.6571676,40.3498013],[-74.6571989,40.3498662],[-74.6569755,40.3499249],[-74.6570091,40.3499937],[-74.6570803,40.350086],[-74.6571023,40.3500796],[-74.6571112,40.3500971],[-74.6570916,40.3501122],[-74.6570822,40.3501299],[-74.6570861,40.3501461],[-74.6571033,40.3501578],[-74.6571254,40.3501618],[-74.6571453,40.3501589],[-74.6571586,40.3501466],[-74.6571616,40.3501275],[-74.6571857,40.350121],[-74.6571951,40.3501411],[-74.6578749,40.3499575],[-74.6578583,40.3499218],[-74.6577869,40.3499411],[-74.6577622,40.3498881],[-74.657887,40.3498543],[-74.657842,40.3497579],[-74.6577143,40.3497925],[-74.6576599,40.3496762],[-74.6578511,40.3496243],[-74.6578183,40.349554],[-74.6581293,40.3494695]]]}},{"type":"Feature","id":"way/131929874","properties":{"@id":"way/131929874","amenity":"library","building":"yes","name":"Lewis Library","operator":"Princeton University","wheelchair":"yes","density":d3,"lat":40.346213,"long":-74.652578,"max":1000},"geometry":{"type":"Polygon","coordinates":[[[-74.6529708,40.3459312],[-74.6529776,40.3460372],[-74.6528642,40.3460414],[-74.6528687,40.3461113],[-74.6527563,40.3461154],[-74.6527524,40.3460536],[-74.6525398,40.3460614],[-74.6525434,40.3461178],[-74.6525166,40.346126],[-74.652501,40.3461716],[-74.6523453,40.3461407],[-74.6523272,40.3461939],[-74.6523041,40.3461893],[-74.6522821,40.3462538],[-74.6522148,40.3462405],[-74.6521804,40.3463411],[-74.6522296,40.3463509],[-74.6522698,40.3463733],[-74.652302,40.3463631],[-74.6523771,40.3464101],[-74.6524013,40.346404],[-74.6524442,40.3464245],[-74.6524764,40.3464572],[-74.6527923,40.3463883],[-74.6527633,40.3463109],[-74.6528331,40.3462957],[-74.6528894,40.3462405],[-74.6531169,40.3462308],[-74.6531118,40.3461609],[-74.653163,40.3461587],[-74.6532622,40.3460442],[-74.6531791,40.3459563],[-74.653177,40.3459236],[-74.6529708,40.3459312]]]}},{"type":"Feature","id":"way/27365000","properties":{"@id":"way/27365000","building":"university","name":"Marquand Art Library","density":d4,"lat":40.347478,"long":-74.658109,"max":1000},"geometry":{"type":"Polygon","coordinates":[[[-74.6579689,40.3469125],[-74.6578171,40.3469524],[-74.6578896,40.3471133],[-74.6579109,40.3471077],[-74.6579839,40.3472694],[-74.657617,40.3473655],[-74.6575899,40.3473053],[-74.6574491,40.3473422],[-74.6575258,40.3475123],[-74.6577202,40.3474614],[-74.6577827,40.3474448],[-74.6577648,40.3474055],[-74.6578864,40.3473734],[-74.6580072,40.3476386],[-74.6583209,40.3475556],[-74.6582364,40.34737],[-74.6585616,40.347284],[-74.6584985,40.3471452],[-74.6581316,40.3472422],[-74.6580442,40.3470501],[-74.6580325,40.3470531],[-74.6579689,40.3469125]]]}},{"type":"Feature","id":"way/40717868","properties":{"@id":"way/40717868","building":"university","name":"Stokes Library","operator":"Princeton University","density":d5,"lat":40.349264,"long":-74.653661,"max":1000},"geometry":{"type":"Polygon","coordinates":[[[-74.6530703,40.349147],[-74.653227,40.3494228],[-74.6532469,40.3494163],[-74.6532649,40.3494479],[-74.6532397,40.3494562],[-74.653265,40.3495007],[-74.6539787,40.3492646],[-74.6541074,40.3492204],[-74.6540786,40.3491717],[-74.6539937,40.3492009],[-74.6539821,40.3491813],[-74.6540256,40.3491663],[-74.6540093,40.3491388],[-74.6539921,40.3491112],[-74.653957,40.3491238],[-74.6539272,40.349076],[-74.6539431,40.3490661],[-74.6539267,40.3490374],[-74.6536957,40.3491141],[-74.6537246,40.3491646],[-74.6536974,40.3491736],[-74.6536872,40.3491558],[-74.6533413,40.3492704],[-74.6533543,40.3492932],[-74.6533358,40.3492994],[-74.653221,40.3490973],[-74.6530703,40.349147]]]}},{"type":"Feature","id":"way/40718191","properties":{"@id":"way/40718191","building":"university","name":"Architecture Library","density":d6,"lat":40.347685,"long":-74.656081,"max":1000},"geometry":{"type":"Polygon","coordinates":[[[-74.6566288,40.3479614],[-74.6565636,40.3477952],[-74.6562089,40.347876],[-74.6561689,40.3477742],[-74.6562206,40.3477624],[-74.656136,40.3475469],[-74.6559164,40.347597],[-74.6560009,40.3478123],[-74.6560965,40.3477905],[-74.6561306,40.3478772],[-74.6559599,40.3479161],[-74.6560312,40.3480977],[-74.6566288,40.3479614]]]}},{"type":"Feature","id":"way/40717843","properties":{"@id":"way/40717843","building":"university","name":"Engineering Library","density":d7,"lat":40.350312,"long":-74.652750,"max":1000},"geometry":{"type":"Polygon","coordinates":[[[-74.6532892,40.3502565],[-74.653171,40.3500382],[-74.6528732,40.3501226],[-74.6524814,40.3502337],[-74.6525583,40.3504016],[-74.6524652,40.3504268],[-74.6522212,40.3504928],[-74.6521263,40.3505185],[-74.6521735,40.3506308],[-74.6525262,40.3505386],[-74.6532892,40.3502565]]]}},{"type":"Feature","id":"way/141450295","properties":{"@id":"way/141450295","building":"dormitory","name":"Wu Dining Hall","density":d8,"lat":40.344702,"long":-74.656507,"max":1000},"geometry":{"type":"Polygon","coordinates":[[[-74.6565584,40.3448576],[-74.6565786,40.3448756],[-74.6566054,40.344892],[-74.6566337,40.3449063],[-74.6566644,40.3449124],[-74.6566939,40.3449104],[-74.65671,40.344892],[-74.6566992,40.3448613],[-74.6564405,40.3445304],[-74.6564243,40.3445393],[-74.6564042,40.3445342],[-74.6563841,40.3445322],[-74.6563626,40.3445353],[-74.6563532,40.3445465],[-74.6563479,40.3445557],[-74.6563492,40.3445649],[-74.6562379,40.344616],[-74.6562698,40.3446579],[-74.6563548,40.3447695],[-74.6563685,40.3447875],[-74.656431,40.3447642],[-74.6564552,40.3447979],[-74.6565296,40.3448315],[-74.6565584,40.3448576]]]}},{"type":"Feature","id":"way/141450294","properties":{"@id":"way/141450294","building":"dormitory","name":"Wilcox Dining Hall","density":d9,"lat":40.344808,"long":-74.656113,"max":1000},"geometry":{"type":"Polygon","coordinates":[[[-74.6558302,40.3450269],[-74.6560957,40.3449124],[-74.6562889,40.3451618],[-74.6564203,40.3451046],[-74.6562111,40.3448327],[-74.6563548,40.3447695],[-74.6562698,40.3446579],[-74.6561333,40.3447162],[-74.6560904,40.3446692],[-74.6559689,40.3447226],[-74.6560019,40.3447693],[-74.6557229,40.3448981],[-74.6557417,40.3449206],[-74.6556478,40.3449615],[-74.6557122,40.3450392],[-74.6558061,40.3449962],[-74.6558302,40.3450269]]]}},{"type":"Feature","id":"way/141297740","properties":{"@id":"way/141297740","building":"dormitory","name":"RoMa Dining Hall","density":d10,"lat":40.348595,"long":-74.662204,"max":1000},"geometry":{"type":"Polygon","coordinates":[[[-74.6618899,40.3485553],[-74.6619794,40.3487358],[-74.6619428,40.3487456],[-74.6619604,40.3487801],[-74.6619866,40.3488313],[-74.6620639,40.3488093],[-74.6620793,40.3488353],[-74.6621866,40.3488057],[-74.6621598,40.3487577],[-74.6622302,40.3487393],[-74.6622262,40.348728],[-74.662259,40.3487188],[-74.6622738,40.3487434],[-74.6627639,40.3486023],[-74.6627559,40.3485854],[-74.662839,40.3485604],[-74.6628075,40.3485047],[-74.6627264,40.3485323],[-74.6627143,40.348517],[-74.6624273,40.3486038],[-74.6623938,40.3485405],[-74.6625467,40.3484914],[-74.662661,40.3484417],[-74.6624568,40.3481689],[-74.6624287,40.3481797],[-74.6624216,40.3481587],[-74.6624175,40.3481468],[-74.6622983,40.3481811],[-74.6623075,40.3481974],[-74.66232,40.3482195],[-74.6623555,40.3482088],[-74.662489,40.3484045],[-74.6624568,40.3484137],[-74.6624461,40.3483933],[-74.6620398,40.3485139],[-74.6619323,40.3482868],[-74.66189,40.3482017],[-74.6618667,40.3481623],[-74.6617434,40.3481956],[-74.6617514,40.3482124],[-74.6616839,40.3482296],[-74.6617218,40.3483038],[-74.661813,40.3482758],[-74.6619156,40.3484792],[-74.6618359,40.3485027],[-74.6618654,40.3485619],[-74.6618899,40.3485553]]]}},{"type":"Feature","id":"way/302942852","properties":{"@id":"way/302942852","building":"dormitory","name":"Forbes Dining Hall","density":d11,"lat":40.341876,"long":-74.660979,"max":1000},"geometry":{"type":"Polygon","coordinates":[[[-74.6610921,40.3426902],[-74.6611833,40.3428047],[-74.6615481,40.3426371],[-74.6616237,40.3426029],[-74.6617511,40.3424343],[-74.6616661,40.3423917],[-74.6616715,40.3423508],[-74.6613818,40.3422404],[-74.6613442,40.3421791],[-74.6614301,40.3421178],[-74.6607595,40.3412387],[-74.6601265,40.3415127],[-74.6603196,40.3417498],[-74.6603733,40.3417253],[-74.66036,40.3417073],[-74.660405,40.3416894],[-74.6603848,40.3416577],[-74.6604016,40.3416515],[-74.6603594,40.3415892],[-74.6603369,40.3415979],[-74.6603171,40.3415713],[-74.6602767,40.3415863],[-74.6602553,40.3415576],[-74.6607542,40.3413532],[-74.6607825,40.3413929],[-74.6607376,40.3414149],[-74.6608361,40.3415396],[-74.6607825,40.3415631],[-74.6607689,40.3415484],[-74.6606779,40.3415866],[-74.6606911,40.3416057],[-74.6605947,40.3416444],[-74.6605812,40.3416261],[-74.6605034,40.3416609],[-74.6605183,40.3416812],[-74.6604846,40.3416936],[-74.6605034,40.3417222],[-74.6604734,40.3417343],[-74.6605141,40.3417835],[-74.6608494,40.3416404],[-74.6608977,40.3417079],[-74.660777,40.3417631],[-74.6607966,40.3417946],[-74.6607367,40.3418224],[-74.6607476,40.3418412],[-74.6606911,40.3418674],[-74.660702,40.3418836],[-74.6606455,40.3419082],[-74.6606804,40.3419573],[-74.6607448,40.3419369],[-74.660793,40.3420064],[-74.660836,40.3420064],[-74.6608628,40.3420105],[-74.6609003,40.3420186],[-74.660952,40.3420406],[-74.6610083,40.342014],[-74.6611808,40.3422398],[-74.6612227,40.3422288],[-74.6612763,40.3423147],[-74.6615808,40.3424506],[-74.6610921,40.3426902]]]}},{"type":"Feature","id":"way/210145781","properties":{"@id":"way/210145781","building":"dormitory","name":"Whitman Dining Hall","density":d12,"lat":40.344184,"long":-74.657646,"max":1000},"geometry":{"type":"Polygon","coordinates":[[[-74.6575171,40.3440452],[-74.6575546,40.3441188],[-74.6575171,40.3441392],[-74.6574903,40.3442128],[-74.6575224,40.3442659],[-74.6575707,40.3442823],[-74.6575976,40.3443355],[-74.6576673,40.3443232],[-74.6578389,40.3442741],[-74.6578014,40.3442046],[-74.6581984,40.3440942],[-74.6583754,40.3445358],[-74.6585095,40.344499],[-74.6583539,40.3440983],[-74.6583861,40.3440574],[-74.658488,40.3440288],[-74.6584666,40.3440002],[-74.6585953,40.3439634],[-74.6585685,40.3439021],[-74.6584934,40.3439205],[-74.6584612,40.3438571],[-74.6585417,40.3438305],[-74.6585041,40.343761],[-74.6584746,40.3437692],[-74.6582788,40.3433542],[-74.6574715,40.3435668],[-74.6574339,40.3434952],[-74.6570289,40.3436199],[-74.6570423,40.3436567],[-74.6569941,40.3436792],[-74.6570423,40.3437692],[-74.6571201,40.3437467],[-74.6571013,40.343714],[-74.6571346,40.3437034],[-74.657332,40.3436404],[-74.6574527,40.3438571],[-74.6575976,40.3438121],[-74.6575385,40.3436915],[-74.6581351,40.3435286],[-74.6581823,40.3435157],[-74.6583808,40.3439348],[-74.6577665,40.3441085],[-74.6576941,40.3439879],[-74.6575171,40.3440452]]]}},{"type":"Feature","id":"way/148099033","properties":{"@id":"way/148099033","building":"university","name":"Center for Jewish Life Dining Hall","operator":"Princeton University","density":d13,"lat":40.346706,"long":-74.653625,"max":1000},"geometry":{"type":"Polygon","coordinates":[[[-74.6538162,40.3466198],[-74.6538616,40.3465647],[-74.6538484,40.3465156],[-74.6537921,40.3464931],[-74.6537304,40.3465074],[-74.6536875,40.3465565],[-74.6535281,40.3466183],[-74.65354,40.3466362],[-74.6534541,40.3466403],[-74.6533884,40.3466064],[-74.65334,40.346661],[-74.6533871,40.3466853],[-74.6533949,40.346714],[-74.6535135,40.3468753],[-74.6536473,40.3468181],[-74.6536363,40.3467814],[-74.6537414,40.3467371],[-74.6537543,40.3467549],[-74.6538195,40.3467662],[-74.6538321,40.3467242],[-74.6538149,40.3467007],[-74.6538612,40.3466811],[-74.6538312,40.34664],[-74.6538162,40.3466198]]]}},{"type":"Feature","id":"way/27341417","properties":{"@id":"way/27341417","building":"yes","leisure":"sports_centre","name":"Dillon Gym","density":d14,"lat":40.345611,"long":-74.658797,"max":1000},"geometry":{"type":"Polygon","coordinates":[[[-74.6588761,40.3449764],[-74.6587394,40.3450124],[-74.6588541,40.3452652],[-74.6580229,40.3454842],[-74.6580752,40.3455993],[-74.6584226,40.3455078],[-74.6584742,40.3456216],[-74.658461,40.3456371],[-74.6584666,40.3456502],[-74.658484,40.3456601],[-74.6585038,40.3457056],[-74.658497,40.3457188],[-74.6585026,40.3457326],[-74.65852,40.3457394],[-74.6585409,40.3457345],[-74.6585494,40.3457188],[-74.6586053,40.3457042],[-74.658624,40.3457113],[-74.6586493,40.3457048],[-74.6588007,40.3460395],[-74.6587692,40.3460478],[-74.6588338,40.3461905],[-74.6588491,40.3461865],[-74.6588668,40.3462257],[-74.6592581,40.3461226],[-74.6592536,40.3461126],[-74.6592406,40.3460851],[-74.6592591,40.3460801],[-74.6592474,40.3460553],[-74.6591933,40.3459367],[-74.6591602,40.3459455],[-74.6591029,40.3458198],[-74.6591684,40.3458025],[-74.6591484,40.3457586],[-74.6590861,40.345775],[-74.658972,40.3455243],[-74.6591375,40.3454806],[-74.6590742,40.3453414],[-74.6590452,40.3453491],[-74.6588761,40.3449764]]]}},{"type":"Feature","id":"way/27341386","properties":{"@id":"way/27341386","building":"university","name":"Frist Campus Center","operator":"Princeton University","wheelchair":"yes","density":d15,"lat":40.346740,"long":-74.655142,"max":1000},"geometry":{"type":"Polygon","coordinates":[[[-74.6555801,40.3466183],[-74.6555912,40.34661],[-74.6555745,40.3465888],[-74.6556126,40.3465716],[-74.6555918,40.346545],[-74.6555533,40.3465617],[-74.6555253,40.3465258],[-74.6555092,40.3465304],[-74.6554264,40.3464243],[-74.6554052,40.3464331],[-74.6553859,40.3464083],[-74.6554514,40.3463783],[-74.6554278,40.3463492],[-74.6553492,40.3463847],[-74.6553387,40.3463713],[-74.6552991,40.3463903],[-74.6552791,40.3463669],[-74.6551691,40.3464192],[-74.6551557,40.3464006],[-74.6547558,40.3465817],[-74.6547692,40.3465995],[-74.6546161,40.3466699],[-74.6546423,40.3467011],[-74.6546249,40.3467101],[-74.6546502,40.3467429],[-74.6546924,40.3467264],[-74.6547093,40.3467487],[-74.6546588,40.346772],[-74.6547516,40.3468911],[-74.6547384,40.3468974],[-74.6547997,40.3469757],[-74.6548139,40.3469709],[-74.6549539,40.3471505],[-74.6550948,40.3470867],[-74.6550851,40.3470742],[-74.6551022,40.3470674],[-74.6551113,40.347045],[-74.6551035,40.3470352],[-74.6552664,40.3469614],[-74.6552794,40.3469783],[-74.6553676,40.3469385],[-74.6553536,40.3469219],[-74.6555104,40.3468509],[-74.6555185,40.346859],[-74.6555435,40.3468654],[-74.6555603,40.34686],[-74.6555697,40.3468721],[-74.6557219,40.3468031],[-74.6555801,40.3466183]]]}}]};
			var geojson = L.geoJson(buildingData, {
				style: style,
				onEachFeature: onEachFeature
			}).addTo(mymap);
			// load hover box in top right
			var info = L.control({position: 'topright'});
			info.onAdd = function(map) {
				this._div = L.DomUtil.create('div', 'info');
				this.update();
				return this._div;
			};
			info.update = function(props) {
				this._div.innerHTML = '<h4>Campus Building Traffic</h4>' + (props ? '<b>' + props.name + '</b><br />' + props.density + ' people' : 'Hover over a building');
			};
			info.addTo(mymap);
			// load legend in bottom right
			var legend = L.control({position: 'bottomright'});
			legend.onAdd = function(map) {
				var div = L.DomUtil.create('div', 'info legend'),
				grades = [0, 20, 40, 60, 80, 100],
				labels = [];
				for (var i = 0; i < grades.length - 1; i++) {
					// div.innerHTML += '<i style="background:' + getColor(grades[i] + 1) + '"></i> ' + grades[i] + (grades[i + 1] ? '&ndash;' + grades[i + 1] + '<br>' : '+');
					div.innerHTML += '<i style="background:' + getColor(grades[i] + 1) + '"></i> ' + grades[i] + '&ndash;' + grades[i + 1] + '% <br>';
				}
				return div;
			};
			legend.addTo(mymap);
			// fill depends on density
			function style(feature) {
				var percentFull = feature.properties.density/feature.properties.max * 100;
				return {
					fillColor: getColor(percentFull),
					weight: 2,
					opacity: 1,
					color: 'white',
					dashArray: '3',
					fillOpacity: 0.7
				};
			}
			// assign color based on density
			function getColor(percentFull) {
				return percentFull > 80 ? '#E50000' :
				percentFull > 60 ? '#DB6300' :
				percentFull > 40 ? '#D2BE00' :
				percentFull > 20 ? '#80C800' :
				'#24BF00';
			}
			// add listeners
			function onEachFeature(feature, layer) {
				layer.on({
					mouseover: highlightFeature,
					mouseout: resetHighlight,
					click: showHistory
				});
			}
			// highlight
			function highlightFeature(e) {
				var layer = e.target;
				layer.setStyle({
					weight: 3,
					color: '#666',
					dashArray: '',
					fillOpacity: 0.7
				});
				if (!L.Browser.ie && !L.Browser.opera && !L.Browser.edge) {
					layer.bringToFront();
				}
				info.update(layer.feature.properties);
			}
			// unhighlight
			function resetHighlight(e) {
				geojson.resetStyle(e.target);
				info.update();
			}
			// generate popup with chart
			function showHistory(e) {
				var options = {
					maxWidth: 500
				};
				var prop = e.target.feature.properties;
				var chartId = "curve_chart" + popupId;
				var popup = L.popup(options)
					.setLatLng([prop.lat,prop.long])
    				.setContent('<div id="' + chartId + '" style="width: 500px; height: 300px"></div>')
    				.openOn(mymap);
			popupId++;
    			drawChart(chartId, prop.name);
			}
			// draw chart
			function drawChart(elem, name) {
				// generate random traffic levels - can replace variable values with real data
				var t1 = Math.round(Math.random() * 1000);
				var t2 = Math.round(Math.random() * 1000);
				var t3 = Math.round(Math.random() * 1000);
				var t4 = Math.round(Math.random() * 1000);
				var t5 = Math.round(Math.random() * 1000);
				var t6 = Math.round(Math.random() * 1000);
				var t7 = Math.round(Math.random() * 1000);
				var t8 = Math.round(Math.random() * 1000);
				var t9 = Math.round(Math.random() * 1000);
				var t10 = Math.round(Math.random() * 1000);
				var t11 = Math.round(Math.random() * 1000);
				var t12 = Math.round(Math.random() * 1000);
				var t13 = Math.round(Math.random() * 1000);
				var t14 = Math.round(Math.random() * 1000);
				var t15 = Math.round(Math.random() * 1000);
				var t16 = Math.round(Math.random() * 1000);
				var t17 = Math.round(Math.random() * 1000);
				var t18 = Math.round(Math.random() * 1000);
				var t19 = Math.round(Math.random() * 1000);
				var t20 = Math.round(Math.random() * 1000);
				var t21 = Math.round(Math.random() * 1000);
				var t22 = Math.round(Math.random() * 1000);
				var t23 = Math.round(Math.random() * 1000);
				var t24 = Math.round(Math.random() * 1000);
				var t25 = Math.round(Math.random() * 1000);
				var data = google.visualization.arrayToDataTable([
					['Time', 'Traffic'],
					['8:00',  t1],
					['8:30',  t2],
					['9:00',  t3],
					['9:30',  t4],
					['10:00',  t5],
					['10:30',  t6],
					['11:00',  t7],
					['11:30',  t8],
					['12:00',  t9],
					['12:30',  t10],
					['1:00',  t11],
					['1:30', t12],
					['2:00', t13],
					['2:30', t14],
					['3:00', t15],
					['3:30', t16],
					['4:00', t17],
					['4:30', t18],
					['5:00', t19],
					['5:30', t20],
					['6:00', t21],
					['6:30', t22],
					['7:00', t23],
					['7:30', t24],
					['8:00', t25]
				]);
	        	var options = {
	        		title: 'Daily Traffic - ' + name,
	        		colors:['#E50000'],
	          		curveType: 'function',
	          		legend: {position: 'none'},
	          		chartArea: {width: '85%', height: '80%'},
	          		vAxis: {
	          			viewWindowMode: 'explicit',
	          			viewWindow: {
	          				min: 0
	          			}
	          		}
	        	};
	        	var container = document.getElementById(elem);
	        	var chart = new google.visualization.LineChart(container);
	        	chart.draw(data, options);
	      	}
		</script>
	</body>
</html>